<!-- Entend the base.html template -->
{% extends "base.html" %}
<!-- Load static files -->
{% load static %}

<!-- Block page header -->
{% block page_header %}
    <div class="container header-container">
        <div class="row">
            <div class="col"></div>
        </div>
    </div>
{% endblock %}

<!-- Content block -->
{% block content %}
    <div class="overlay"></div>
    <!-- Cart -->
    <div class="container mb-2 text-dark">
        <div class="row">
            <div class="col text-center">
                <hr>
                <h2 class="mb-4">Cart</h2>
                <hr>
            </div>
        </div>
    </div>
        <!-- If items in cart_items list, display -->
        {% if cart_items %}
            <!-- loop through and display cart_items -->
            {% for item in cart_items %}
                <div class="container text-dark mb-2">
                    <div class="row align-items-baseline text-center">
                        <div class="col-md-3 pb-3">
                            <img src="{{ item.workout.image.url }}" class="rounded-2 img-fluid" alt="{{ item.workout.name }}">
                        </div>
                        <div class="col-md-3">
                            <h4>{{ item.workout.name }}</h4>
                        </div>
                        <div class="col-md-3 mt-3">
                            <h4>Price</h4>
                            <p class="text-muted">€ {{ item.workout.price }}</p>
                        </div>
                        <div class="col-md-3 mt-3">
                            <h4>Plan duration</h4>
                            <p class="text-muted">{{ item.workout.plan_duration }}</p>
                        </div>
                    </div>
                </div>
                <!-- Remove item cart button -->
                <div class="container text-dark">
                    <div class="row text-center">
                        <div class="col-md-3">
                            <a id="remove_{{ item.item_id }}" class="btn btn-sm btn-danger">Remove Plan</a>
                        </div> 
                    </div>
                    <hr>
                </div>
            {% endfor %}
            <div class="container text-dark">
                <div class="row">
                    <!-- Total price display -->
                    <div class="col-12 mt-3">
                        <h4 class="mt-2"><strong>Total: €{{ total }}</strong></h4>
                    </div>
                    <!-- END Total price display -->
                    <!-- Action buttons -->
                    <div class="col-12 mt-1">
                        <a href="{% url 'workouts' %}" class="btn rounded-2 btn-lg me-4 my-3">
                            <span class="icon">
                                <i class="fas fa-dumbbell"></i>
                            </span>
                            <span class="text-uppercase ps-1">Back to Plans</span>
                        </a>
                        <a href="" class="btn rounded btn-lg my-3">
                            <span class="text-uppercase pe-1">Secure Checkout</span>
                            <span class="icon">
                                <i class="fas fa-credit-card"></i>
                            </span>
                        </a>
                    </div>
                    <!-- END Action buttons -->
                </div>
            </div>
            <!-- END loop through and display cart_items -->
        {% else %}
            <!-- If cart_items list is empty, Display -->
            <div class="container mb-2">
                <div class="row">
                    <div class="col">
                        <h4>Your cart is empty</h4>
                    </div>
                </div>
            </div> 
            <!-- END If cart_items list is empty, Display -->  
        {% endif %}
    <!-- END Cart -->
{% endblock %}
<!-- End Content block -->